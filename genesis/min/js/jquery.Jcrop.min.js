function updateCoords(e){jQuery("#x").val(e.x),jQuery("#y").val(e.y),jQuery("#w").val(e.w),jQuery("#h").val(e.h)}function checkCoords(){return!!parseInt(jQuery("#w").val())||(alert("Selecione uma Ã¡rea para recortar."),!1)}!function(e){e.Jcrop=function(t,n){function o(e){return parseInt(e,10)+"px"}function r(e){return parseInt(e,10)+"%"}function a(e){return T.baseClass+"-"+e}function s(t){var n=e(t).offset();return[n.left,n.top]}function i(e){return[e.pageX-O[0],e.pageY-O[1]]}function c(t){"object"!=typeof t&&(t={}),"function"!=typeof(T=e.extend(T,t)).onChange&&(T.onChange=function(){}),"function"!=typeof T.onSelect&&(T.onSelect=function(){}),"function"!=typeof T.onRelease&&(T.onRelease=function(){})}function u(e,t){if(O=s(D),ne.setCursor("move"===e?e:e+"-resize"),"move"===e)return ne.activateHandlers(function(e){var t=e;return oe.watchKeys(),function(e){ee.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,te.update()}}(t),g);var n=ee.getFixed(),o=d(e),r=ee.getCorner(d(o));ee.setPressed(ee.getCorner(o)),ee.setCurrent(r),ne.activateHandlers(function(e,t){return function(n){if(T.aspectRatio)switch(e){case"e":case"w":n[1]=t.y+1;break;case"n":case"s":n[0]=t.x+1}else switch(e){case"e":case"w":n[1]=t.y2;break;case"n":case"s":n[0]=t.x2}ee.setCurrent(n),te.update()}}(e,n),g)}function d(e){switch(e){case"n":return"sw";case"s":case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function l(e){return function(t){return!T.disabled&&(!("move"===e&&!T.allowMove)&&(G=!0,u(e,i(t)),t.stopPropagation(),t.preventDefault(),!1))}}function f(e,t,n){var o=e.width(),r=e.height();o>t&&t>0&&(o=t,r=t/e.width()*e.height()),r>n&&n>0&&(r=n,o=n/e.height()*e.width()),V=e.width()/o,q=e.height()/r,e.width(o).height(r)}function p(e){return{x:parseInt(e.x*V,10),y:parseInt(e.y*q,10),x2:parseInt(e.x2*V,10),y2:parseInt(e.y2*q,10),w:parseInt(e.w*V,10),h:parseInt(e.h*q,10)}}function g(e){var t=ee.getFixed();t.w>T.minSelect[0]&&t.h>T.minSelect[1]?(te.enableHandles(),te.done()):te.release(),ne.setCursor(T.allowSelect?"crosshair":"default")}function v(e){if(T.disabled)return!1;if(!T.allowSelect)return!1;G=!0,O=s(D),te.disableHandles(),function(e){e!==M&&(ne.setCursor(e),M=e)}("crosshair");var t=i(e);return ee.setPressed(t),te.update(),ne.activateHandlers(b,g),oe.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function b(e){ee.setCurrent(e),te.update()}function m(){var t=e("<div></div>").addClass(a("tracker"));return e.browser.msie&&t.css({opacity:0,backgroundColor:"white"}),t}function C(e){S([parseInt(e[0],10)/V,parseInt(e[1],10)/q,parseInt(e[2],10)/V,parseInt(e[3],10)/q])}function S(e){ee.setPressed([e[0],e[1]]),ee.setCurrent([e[2],e[3]]),te.update()}function I(){T.disabled=!0,te.disableHandles(),te.setCursor("default"),ne.setCursor("default")}function z(){T.disabled=!1,k()}function k(t){T.allowResize?t?te.enableOnly():te.enableHandles():te.disableHandles(),ne.setCursor(T.allowSelect?"crosshair":"default"),te.setCursor(T.allowMove?"move":"default"),T.hasOwnProperty("setSelect")&&(C(T.setSelect),te.done(),delete T.setSelect),T.hasOwnProperty("trueSize")&&(V=T.trueSize[0]/j,q=T.trueSize[1]/E),T.hasOwnProperty("bgColor")&&(e.fx.step.hasOwnProperty("backgroundColor")&&T.fadeTime?R.animate({backgroundColor:T.bgColor},{queue:!1,duration:T.fadeTime}):R.css("backgroundColor",T.bgColor),delete T.bgColor),T.hasOwnProperty("bgOpacity")&&($=T.bgOpacity,te.isAwake()&&(T.fadeTime?D.fadeTo(T.fadeTime,$):R.css("opacity",T.opacity)),delete T.bgOpacity),B=T.maxSize[0]||0,K=T.maxSize[1]||0,Q=T.minSize[0]||0,W=T.minSize[1]||0,T.hasOwnProperty("outerImage")&&(D.attr("src",T.outerImage),delete T.outerImage),te.refresh()}var O,M,T=e.extend({},e.Jcrop.defaults),H=!1;e.browser.msie&&"6"===e.browser.version.split(".")[0]&&(H=!0),"object"!=typeof t&&(t=e(t)[0]),"object"!=typeof n&&(n={}),c(n);var P={border:"none",margin:0,padding:0,position:"absolute"},F=e(t),D=F.clone().removeAttr("id").css(P);D.width(F.width()),D.height(F.height()),F.after(D).hide(),f(D,T.boxWidth,T.boxHeight);var j=D.width(),E=D.height(),R=e("<div />").width(j).height(E).addClass(a("holder")).css({position:"relative",backgroundColor:T.bgColor}).insertAfter(F).append(D);delete T.bgColor,T.addClass&&R.addClass(T.addClass);var J=e("<img />").attr("src",D.attr("src")).css(P).width(j).height(E),Y=e("<div />").width(r(100)).height(r(100)).css({zIndex:310,position:"absolute",overflow:"hidden"}).append(J),X=e("<div />").width(r(100)).height(r(100)).css("zIndex",320),A=e("<div />").css({position:"absolute",zIndex:300}).insertBefore(D).append(Y,X);H&&A.css({overflowY:"hidden"});var B,K,Q,W,V,q,G,L,N,U=T.boundary,Z=m().width(j+2*U).height(E+2*U).css({position:"absolute",top:o(-U),left:o(-U),zIndex:290}).mousedown(v),$=T.bgOpacity;O=s(D);var _=function(){function e(){var e,t={},n=["touchstart","touchmove","touchend"],o=document.createElement("div");try{for(e=0;e<n.length;e++){var r=n[e],a=(r="on"+r)in o;a||(o.setAttribute(r,"return;"),a="function"==typeof o[r]),t[n[e]]=a}return t.touchstart&&t.touchend&&t.touchmove}catch(e){return!1}}return{createDragger:function(e){return function(t){return t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,!T.disabled&&(!("move"===e&&!T.allowMove)&&(G=!0,u(e,i(t)),t.stopPropagation(),t.preventDefault(),!1))}},newSelection:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,v(e)},isSupported:e,support:!0===T.touchSupport||!1===T.touchSupport?T.touchSupport:e()}}(),ee=function(){function e(){if(!T.aspectRatio)return function(){var e,t=c-s,r=u-i;B&&Math.abs(t)>B&&(c=t>0?s+B:s-B);K&&Math.abs(r)>K&&(u=r>0?i+K:i-K);W/q&&Math.abs(r)<W/q&&(u=r>0?i+W/q:i-W/q);Q/V&&Math.abs(t)<Q/V&&(c=t>0?s+Q/V:s-Q/V);s<0&&(c-=s,s-=s);i<0&&(u-=i,i-=i);c<0&&(s-=c,c-=c);u<0&&(i-=u,u-=u);c>j&&(s-=e=c-j,c-=e);u>E&&(i-=e=u-E,u-=e);s>j&&(u-=e=s-E,i-=e);i>E&&(u-=e=i-E,i-=e);return o(n(s,i,c,u))}();var e,t,r=T.aspectRatio,a=T.minSize[0]/V,d=T.maxSize[0]/V,l=T.maxSize[1]/q,f=c-s,p=u-i,g=Math.abs(f),v=Math.abs(p);return 0===d&&(d=10*j),0===l&&(l=10*E),g/v<r?(t=u,w=v*r,(e=f<0?s-w:w+s)<0?(e=0,h=Math.abs((e-s)/r),t=p<0?i-h:h+i):e>j&&(e=j,h=Math.abs((e-s)/r),t=p<0?i-h:h+i)):(e=c,h=g/r,(t=p<0?i-h:i+h)<0?(t=0,w=Math.abs((t-i)*r),e=f<0?s-w:w+s):t>E&&(t=E,w=Math.abs(t-i)*r,e=f<0?s-w:w+s)),e>s?(e-s<a?e=s+a:e-s>d&&(e=s+d),t=t>i?i+(e-s)/r:i-(e-s)/r):e<s&&(s-e<a?e=s-a:s-e>d&&(e=s-d),t=t>i?i+(s-e)/r:i-(s-e)/r),e<0?(s-=e,e=0):e>j&&(s-=e-j,e=j),t<0?(i-=t,t=0):t>E&&(i-=t-E,t=E),o(n(s,i,e,t))}function t(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>j&&(e[0]=j),e[1]>E&&(e[1]=E),[e[0],e[1]]}function n(e,t,n,o){var r=e,a=n,s=t,i=o;return n<e&&(r=n,a=e),o<t&&(s=o,i=t),[Math.round(r),Math.round(s),Math.round(a),Math.round(i)]}function o(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var r,a,s=0,i=0,c=0,u=0;return{flipCoords:n,setPressed:function(e){e=t(e),c=s=e[0],u=i=e[1]},setCurrent:function(e){e=t(e),r=e[0]-c,a=e[1]-u,c=e[0],u=e[1]},getOffset:function(){return[r,a]},moveOffset:function(e){var t=e[0],n=e[1];0>s+t&&(t-=t+s),0>i+n&&(n-=n+i),E<u+n&&(n+=E-(u+n)),j<c+t&&(t+=j-(c+t)),s+=t,c+=t,i+=n,u+=n},getCorner:function(t){var n=e();switch(t){case"ne":return[n.x2,n.y];case"nw":return[n.x,n.y];case"se":return[n.x2,n.y2];case"sw":return[n.x,n.y2]}},getFixed:e}}(),te=function(){function t(t){var n=e("<div />").css({position:"absolute",opacity:T.borderOpacity}).addClass(a(t));return Y.append(n),n}function n(t,n){var o=e("<div />").mousedown(l(t)).css({cursor:t+"-resize",position:"absolute",zIndex:n});return _.support&&o.bind("touchstart",_.createDragger(t)),X.append(o),o}function s(e){return n(e,y++).css({top:o(1-S),left:o(1-S),opacity:T.handleOpacity}).addClass(a("handle"))}function i(e){var t=T.handleSize,a=t,s=t,i=S,c=S;switch(e){case"n":case"s":s=r(100);break;case"e":case"w":a=r(100)}return n(e,y++).width(s).height(a).css({top:o(1-i),left:o(1-c)})}function c(e){var t;for(t=0;t<e.length;t++)x[e[t]]=s(e[t])}function u(e){var t=Math.round(e.h/2-S),n=Math.round(e.w/2-S),r=e.w-S,a=e.h-S;x.e&&(x.e.css({top:o(t),left:o(r)}),x.w.css({top:o(t)}),x.s.css({top:o(a),left:o(n)}),x.n.css({left:o(n)})),x.ne&&(x.ne.css({left:o(r)}),x.se.css({top:o(a),left:o(r)}),x.sw.css({top:o(a)})),x.b&&(x.b.css({top:o(a)}),x.r.css({left:o(r)}))}function d(){var e=ee.getFixed();ee.setPressed([e.x,e.y]),ee.setCurrent([e.x2,e.y2]),f()}function f(){if(b)return h()}function h(){var e=ee.getFixed();!function(e,t){A.width(e).height(t)}(e.w,e.h),function(e,t){J.css({top:o(-t),left:o(-e)}),A.css({top:o(t),left:o(e)})}(e.x,e.y),C&&u(e),b||function(){A.show(),T.bgFade?D.fadeTo(T.fadeTime,$):D.css("opacity",$);b=!0}(),T.onChange.call(re,p(e))}function g(){if(C=!0,T.allowResize)return u(ee.getFixed()),X.show(),!0}function w(){C=!1,X.hide()}function v(e){L===e?w():g()}var b,y=370,x={},C=!1,S=T.handleOffset;T.drawBorders&&(t("hline"),t("hline bottom"),t("vline"),t("vline right")),T.dragEdges&&(x.t=i("n"),x.b=i("s"),x.r=i("e"),x.l=i("w")),T.sideHandles&&c(["n","s","e","w"]),T.cornerHandles&&c(["sw","nw","ne","se"]);var I=m().mousedown(l("move")).css({cursor:"move",position:"absolute",zIndex:360});return _.support&&I.bind("touchstart.jcrop",_.createDragger("move")),Y.append(I),w(),{updateVisible:f,update:h,release:function(){w(),A.hide(),T.bgFade?D.fadeTo(T.fadeTime,1):D.css("opacity",1),b=!1,T.onRelease.call(re)},refresh:d,isAwake:function(){return b},setCursor:function(e){I.css("cursor",e)},enableHandles:g,enableOnly:function(){C=!0},showHandles:function(){C&&(u(ee.getFixed()),X.show())},disableHandles:w,animMode:v,done:function(){v(!1),d()}}}(),ne=function(){function t(e){return r(i(e)),!1}function n(o){return o.preventDefault(),o.stopPropagation(),G&&(G=!1,a(i(o)),te.isAwake()&&T.onSelect.call(re,p(ee.getFixed())),Z.css({zIndex:290}),s&&e(document).unbind("mousemove",t).unbind("mouseup",n),r=function(){},a=function(){}),!1}function o(o,i){return G=!0,r=o,a=i,Z.css({zIndex:450}),s&&e(document).bind("mousemove",t).bind("mouseup",n),!1}var r=function(){},a=function(){},s=T.trackDocument;return _.support&&e(document).bind("touchmove",function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,t(e)}).bind("touchend",function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,n(e)}),s||Z.mousemove(t).mouseup(n).mouseout(n),D.before(Z),{activateHandlers:o,setCursor:function(e){Z.css("cursor",e)}}}(),oe=function(){function t(e,t,n){T.allowMove&&(ee.moveOffset([t,n]),te.updateVisible()),e.preventDefault(),e.stopPropagation()}var n=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}),o=e("<div />").css({position:"absolute",overflow:"hidden"}).append(n);return T.keySupport&&(n.keydown(function(e){if(e.ctrlKey)return!0;var n=(N=!!e.shiftKey)?10:1;switch(e.keyCode){case 37:t(e,-n,0);break;case 39:t(e,n,0);break;case 38:t(e,0,-n);break;case 40:t(e,0,n);break;case 27:te.release();break;case 9:return!0}return!1}).blur(function(e){n.hide()}),H||!T.fixedSupport?(n.css({position:"absolute",left:"-20px"}),o.append(n).insertBefore(D)):n.insertBefore(D)),{watchKeys:function(){T.keySupport&&(n.show(),n.focus())}}}();_.support&&Z.bind("touchstart",_.newSelection),X.hide(),k(!0);var re={setImage:function(e,t){te.release(),I();var n=new Image;n.onload=function(){var o=n.width,r=n.height,a=T.boxWidth,s=T.boxHeight;D.width(o).height(r),D.attr("src",e),J.attr("src",e),f(D,a,s),j=D.width(),E=D.height(),J.width(j).height(E),Z.width(j+2*U).height(E+2*U),R.width(j).height(E),z(),"function"==typeof t&&t.call(re)},n.src=e},animateTo:function(e,t){function n(){window.setTimeout(b,l)}var o=parseInt(e[0],10)/V,r=parseInt(e[1],10)/q,a=parseInt(e[2],10)/V,s=parseInt(e[3],10)/q;if(!L){var i=ee.flipCoords(o,r,a,s),c=ee.getFixed(),u=[c.x,c.y,c.x2,c.y2],d=u,l=T.animationDelay,f=i[0]-u[0],h=i[1]-u[1],p=i[2]-u[2],g=i[3]-u[3],w=0,v=T.swingSpeed;x=d[0],y=d[1],a=d[2],s=d[3],te.animMode(!0);var b=function(){w+=(100-w)/v,d[0]=x+w/100*f,d[1]=y+w/100*h,d[2]=a+w/100*p,d[3]=s+w/100*g,w>=99.8&&(w=100),w<100?(S(d),n()):(te.done(),"function"==typeof t&&t.call(re))};n()}},setSelect:C,setOptions:function(e){c(e),k()},tellSelect:function(){return p(ee.getFixed())},tellScaled:function(){return ee.getFixed()},setClass:function(e){R.removeClass().addClass(a("holder")).addClass(e)},disable:I,enable:z,cancel:function(){te.done(),ne.activateHandlers(null,null)},release:te.release,destroy:function(){R.remove(),F.show(),e(t).removeData("Jcrop")},focus:oe.watchKeys,getBounds:function(){return[j*V,E*q]},getWidgetSize:function(){return[j,E]},getScaleFactor:function(){return[V,q]},ui:{holder:R,selection:A}};return e.browser.msie&&R.bind("selectstart",function(){return!1}),F.data("Jcrop",re),re},e.fn.Jcrop=function(t,n){function o(o){var r="object"==typeof t?t:{},a=r.useImg||o.src,s=new Image;s.onload=function(){function t(){s.width&&s.height?function(){var t=e.Jcrop(o,r);"function"==typeof n&&n.call(t)}():window.setTimeout(t,50)}window.setTimeout(t,50)},s.src=a}return this.each(function(){if(e(this).data("Jcrop")){if("api"===t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else o(this)}),this},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"transparent",bgOpacity:.2,bgFade:!1,borderOpacity:.8,handleOpacity:.5,handleSize:9,handleOffset:5,aspectRatio:0,keySupport:!0,cornerHandles:!0,sideHandles:!0,drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onRelease:function(){}}}(jQuery);